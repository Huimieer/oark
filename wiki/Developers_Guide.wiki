#summary Developers Guide

= Environment for developers =

The driver is built with *WinDDK 6001.17121*, you can install this DDK with others DDKs in the system without problems.

For an easy environment you can install this tools:
  * *AnkhSVN* - Subversion Support for Visual Studio: [http://ankhsvn.open.collab.net/]
  * *DDKWizard + DDKBUILD.CMD* - Driver environment for Visual Studio: [http://ddkwizard.assarbad.net/]
  * *Visual Studio* - IDE with intellisense ... 

DDKWizard It is compatible with Visual Studio .NET, Visual Studio .NET 2003, Visual Studio 2005 and 2008 and the Express Editions of Visual C++ 2005 and 2008. The \normal" Visual C++ versions are supposed to work ne as well. Refer to section 2.5 and section 3.1 for some possible limitations depending on your Visual Studio version. Visual Studio 2005 and 2008 (and their avors) support all DDKWizard features!

== Configuring the driver project in Visual Studio ==

In the subversion exist a visual studio project, but you need change:

  * *Properties* of the solution *.WXP* (right click in the solution project with extension *.WXP*, in solution explorer tab). In the option *"Configuration Properties"* click in *NMake* and add to *Include Search Path* and add the same in *Forced Includes*:
    * *X:\WinDDK_PATH\DDK_VERSION\inc\api*
    * *X:\WinDDK_PATH\DDK_VERSION\inc\ddk*
    * -
    * *WARNING:* NEVER REMOVE THE ENTRY: 
        * *"..\..\common\common"* in *Include Search Path* and *Forced Includes*
    * *WARNING:* NEVER REMOVE THE ENTRY:
        * *"xcopy /y ".\obj%BUILD_ALT_DIR%\i386\`*`.sys" "..\..\oark_usermode\oark_usermode""* in *ddkpostbld.cmd* file
    * *WARNING:* NEVER REMOVE THE ENTRY:
        * *INCLUDES =..\..\common\common* in *sources* file

You need configure the *"WinDDK Paths"* in the file with extension *".vsprops"*

    * *Name="DDKBUILD_PATH"*
    * *Value="C:\DDK_BUILD_PATH.CMD"* You can download the CMD from: *[http://ddkwizard.assarbad.net/]*, *Example: Value="C:\WINDDK\ddkbuild.cmd"*
    * *Name="WXPBASE", "WNETBASE"* etc..
    * *Value="C:\WinDDK_PATH\DDK_VERSION"*, you need add here the PATH of the WinDDK Path Version, you can find the version for build the driver in this wiki. *Example: Value="C:\WinDDK\6001.17121"*

Compile *ALWAYS* in *WXP Free"

== Configuring the user mode project in Visual Studio ==

The user mode executable have the driver inside (in a .rsrc), when the executable is running it dumps the driver to a temp file and load the driver. When you build the driver project the output with ".sys" extension is copied to the folder of user mode project. When you build the user mode project with a new driver version you need *Clean the project* after compile.

  * *WARNING:* NEVER REMOVE THE ENTRY:
        * *"..\..\common\common"* in *"Project Properties -> Configuration Properties -> C/C++ -> General -> Additional Include Directories"*

Compile *ALWAYS* in *Release*.